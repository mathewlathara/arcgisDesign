{% extends 'adminlte/new_dashboard_base.html' %}
{% load static %}
{% block content %}

<!-- <div class="container"> -->
    <div class=" ml-5 row">
        <h2 class="text-primary font-weight-normal">
            Analyse our historical data
        </h2>
    </div>
    <div class="ml-5 row no-gutters">
        <p class="text-secondary font-weight-light">Instructions, which filters to select depending on the userâ€™s intentions, knowledge, or tasks.<br>
            Which are necessary, which no, specifically station is an extra filter but not mandatory.</p>
    </div>

    <div class="row  p-5" style="background-color: rgba(245,244,244,1);">
        <div class="col-5 no-gutters col-centered">
            <div class="pl-2 row no-gutters"><label class="text-primary mb-2">From year*</label></div>
            <select class="p-3 pl-5 pr-5 form-select" name="year" id="yearFrom" style="border-radius: 20px;" aria-label="Default select example">
                <option selected>Select from year</option>
                
            </select>
            <div class="pl-2 row no-gutters "><label class="text-primary mb-2">Standard*</label></div>
            <select class="p-3 pl-5 pr-5 form-select" name="year" id="standardType" style="border-radius: 20px;" aria-label="Default select example">
                <option selected>Select Standard</option>
                
            </select>
            <div class="pl-2 row no-gutters"><label class="text-primary mb-2">Station*</label></div>
            <select class="p-3 pl-5 pr-5 form-select" name="station" id="station" style="border-radius: 20px;" aria-label="Default select example">
                <option selected>Select Station</option>
                
            </select>
        </div>
        <div class="col-5 no-gutters col-centered">
            <div class="pl-2 row no-gutters"><label class="text-primary mb-2">To year*</label></div>
            <select class="p-3 pl-5 pr-5 form-select" name="year" id="yearTo" style="border-radius: 20px;" aria-label="Default select example">
                <option selected>Select to year</option>
                
            </select>
            <div class="pl-2 row no-gutters"><label class="text-primary mb-2">On X-axis*</label></div>
            <select class="p-3 pl-5 pr-5 form-select" name="" id="f1" style="border-radius: 20px;" aria-label="Default select example">
                <option selected>On X-axis</option>
                
            </select>
            <div class="pl-2 row no-gutters"><label class="text-primary mb-2">On Y-axis</label></div>
            <select class="p-3 pl-5 pr-5 form-select" name="" id="f2" style="border-radius: 20px;" aria-label="Default select example">
                <option selected>On Y-axis</option>
                
            </select>
        </div>
        <div class="d-flex align-items-star col-2">
            <button class=" pl-5 pr-5  btn btn-primary rounded-pill align-self-center" id="getValue" onclick="return plotFromCSV();">Filter</button>
        </div>

        <div class="row">
            <p class="mt-2" id="showfilteroption" style="color: slateblue;"></p>
          
            <div class="col-sm-6">
              <span>
                <div class="mt-5" id="graph1">
          
                </div>
              </span>
              <span class="align-middle">
                <div class="mt-5" id="des1">
                  <p class="text-justify mx-auto"></p>
                </div>
              </span>
            </div>
            <div class="col-sm-6">
              <span>
                <div class="mt-5" id="graph2">
          
                </div>
              </span>
              <span class="align-middle">
                <div class="mt-5" id="des2">
                  <p class="text-justify"></p>
                </div>
              </span>
            </div>
          </div>
          
    </div>


<!-- </div> -->

{% endblock %}
{% block javascriptedit %}
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://api.tiles.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="{% static 'admin-lte/bootstrap/vendor/jquery/jquery.min.js' %}"></script>
<script src="{% static 'admin-lte/bootstrap/vendor/jquery-easing/jquery.easing.min.js' %}"></script>
<script type="text/javascript" src="static/admin-lte/dist/js/analysis.js"></script>
<script src="{% static 'admin-lte/bootstrap/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<link href="https://api.tiles.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css" rel="stylesheet" />

<!-- Core plugin JavaScript-->
<script src="{% static 'admin-lte/bootstrap/vendor/jquery-easing/jquery.easing.min.js' %}"></script>

<!-- Custom scripts for all pages-->
<script src="{% static 'admin-lte/bootstrap/js/sb-admin-2.min.js' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js "></script>
<script src="https://cdn.plot.ly/plotly-2.11.1.min.js"></script>
<script src="https://js.arcgis.com/4.23/"></script>
<script src="{% static 'admin-lte/assets/js/arcgisjs/arcgisjs.js' %} "></script>
<script>
$(document).ready(function() {
    $('[data-toggle="popover"]').popover({
      trigger : 'hover'
    });
});

let stations = [28, 29, 30, 85, 3007703502, 6010400102, 6010400802, 6010700202,
        6010800102, 6010800202, 6011100102, 6011100202, 6011100302,
        6011100502, 6011100602, 6011100702, 6011100802, 6011200302,
        6011200602, 6011600102, 6011600202, 6011600502, 6011600602, 988,
        1328, 1329, 1330, 17002113602, 17002113702, 600010258, 600010708,
        600013587, 6008000602, 6008000702, 6008200302, 6008300202,
        6008300402, 6008300902, 6008301202, 6008301802, 6008301902,
        6008310302, 6008310402, 6008500302, 6008500402, 6008501402,
        6009400202, 6009700302, 6009700702, 6009701102, 6009701302,
        6009701802, '6009701802', '6010400102', '6010400802', '6010402302',
        '6010402502', '6010402602', '6010402702', '6010402802',
        '6010402902', '6010403702', '6010700202', '7th Concession', '85',
        'Annadale', 'Brock Ridge', 'CC005', 'Central 1', 'Central 10',
        'Central 11', 'Central 12', 'Central 2', 'Central 3', 'Central 4',
        'Central 5', 'Central 6', 'Central 7', 'Central 8', 'Central 9',
        'East 1', 'East 10', 'East 11', 'East 12', 'East 2', 'East 3',
        'East 4', 'East 5', 'East 6', 'East 7', 'East 8', 'East 9',
        'FB003WM', 'PT001WM', 'Paulyn Park', 'Shoal Point', 'West 1',
        'West 10', 'West 11', 'West 12', 'West 2', 'West 3', 'West 4',
        'West 5', 'West 6', 'West 7', 'West 8', 'West 9'];

  $(document).ready(function () {
    plotFromCSV();
    let yearFrom = document.getElementById('yearFrom');
    let yearTo = document.getElementById('yearTo');
    let f1 = document.getElementById('f1');
    let f2 = document.getElementById('f2');
    let des1 = document.getElementById('dec1');
    let des2 = document.getElementById('dec2');
    // let standard_type = document.getElementById('standardType');
    let station_id = document.getElementById('station');
    var standardropdown = standardDropdownBox();
    var yearfromDropDown = yearFromDropDown();
    var yeartoDropDown = yearToDropDown();
    var stationSelectbox = stationIdSelectbox();
    var f1selectbox = f1Selectbox();
    var f2selectbox = f2Selectbox();
    var mapselectdropdown = mapSelectDropDown();
    $("#standardType").html(standardropdown);
    $("#yearFrom").html(yearfromDropDown);
    $("#yearTo").html(yeartoDropDown);
    $("#station").html(stationSelectbox);
    $("#f1").html(f1selectbox);
    $("#f2").html(f2selectbox);
    $("#mapyearselect").html(mapselectdropdown);
    csrftoken = document.cookie.split('=')[1];
    data = {'yearFrom':yearFrom.value, 'yearTo':yearTo.value, 'f1':f1.value, 'f2':f2.value};
    $('#getValue').click(function(){
      $.ajax({
              type: 'POST',
              url: '/analysisFilterData',
              data: data,
              // contentType: false,
              // processData: false,
              headers: { "X-CSRFToken": csrftoken },

              success: function (data) {
                console.log(data.staus);
              },
              error: function (error) {
                  console.log("Error" + JSON.stringify(error));
              }
      });
    });

    // $(document).on('click', '#f1', function(){
    //     var selectboxreturn = "<option value='' selected>On X</option>";
    //     $(dataColumns).each((index, element) => {
    //         // console.log(`current index : ${index} element : ${element}`)
    //         selectboxreturn += "<option value='"+element+"'>"+element+"</option>";
    //     });
    //     $("#f1").html(selectboxreturn);
    // });

    // $(document).on('click', '#f2', function(){
    //     var selectboxreturn = "<option value='' selected>On Y</option>";
    //     $(dataColumns).each((index, element) => {
    //         // console.log(`current index : ${index} element : ${element}`)
    //         selectboxreturn += "<option value='"+element+"'>"+element+"</option>";
    //     });
    //     $("#f2").html(selectboxreturn);
    // });

    // $(document).on('click', '#standardType', function(){
    //     var selectboxreturn = "<option value='' selected>Standard</option>";
    //     $(standardType).each((index, element) => {
    //         // console.log(`current index : ${index} element : ${element}`)
    //         selectboxreturn += "<option value='"+element+"'>"+element+"</option>";
    //     });
    //     $("#standardType").html(selectboxreturn);
    // });

    // $(document).on('click', '#station', function(){
    //     var selectboxreturn = "<option value='' selected>Station</option>";
    //     $(stations).each((index, element) => {
    //         // console.log(`current index : ${index} element : ${element}`)
    //         selectboxreturn += "<option value='"+element+"'>"+element+"</option>";
    //     });
    //     $("#station").html(selectboxreturn);
    // });

    // $(document).on('click', '#yearFrom', function(){
    //   let currentYear = new Date().getFullYear();
    //   let earliestYear = 2000;
    //     var selectboxreturn = "<option value='' selected disabled>From year</option>";
    //     while (currentYear >= earliestYear) {
    //       selectboxreturn += "<option value='"+currentYear+"'>"+currentYear+"</option>";
    //       currentYear -= 1;
    //     }
    //     $("#yearFrom").html(selectboxreturn);
    // });
    // $("#yearFrom").change(function () {
    //     console.log("yearFrom === ",$(this).val());
    //     var yearFrom = $(this).val();
    // });

    // $(document).on('click', '#yearTo', function(){
    //   let currentYear = new Date().getFullYear();
    //   let earliestYear = 2000;
    //     var selectboxreturn = "<option value='' selected disabled>To year</option>";
    //     while (currentYear >= earliestYear) {
    //       selectboxreturn += "<option value='"+currentYear+"'>"+currentYear+"</option>";
    //       currentYear -= 1;
    //     }
    //     $("#yearTo").html(selectboxreturn);
    // });

  });
</script>


</script>
{% endblock javascriptedit %}
